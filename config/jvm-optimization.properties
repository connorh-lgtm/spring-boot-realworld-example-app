# JVM Optimization Configuration Profiles for Java 17
# Use these profiles for different environments and performance requirements

# =============================================================================
# DEVELOPMENT PROFILE - Fast startup, moderate memory usage
# =============================================================================
[development]
# Memory Settings - Conservative for development
-Xms256m
-Xmx1g
-XX:MetaspaceSize=128m
-XX:MaxMetaspaceSize=256m

# G1GC Settings - Optimized for fast startup
-XX:+UseG1GC
-XX:MaxGCPauseMillis=200
-XX:G1HeapRegionSize=8m

# Development Optimizations
-XX:+TieredCompilation
-XX:TieredStopAtLevel=1
-XX:+UseCompressedOops

# Debugging and Monitoring
-XX:+FlightRecorder
-XX:+UnlockDiagnosticVMOptions
-XX:+LogVMOutput

# =============================================================================
# PRODUCTION PROFILE - Optimized throughput and memory efficiency
# =============================================================================
[production]
# Memory Settings - Production optimized
-Xms512m
-Xmx2g
-XX:MetaspaceSize=256m
-XX:MaxMetaspaceSize=512m

# G1GC Optimizations - Tuned for throughput
-XX:+UseG1GC
-XX:MaxGCPauseMillis=100
-XX:G1HeapRegionSize=16m
-XX:+UseStringDeduplication
-XX:+OptimizeStringConcat

# Performance Optimizations
-XX:+UseCompressedOops
-XX:+UseCompressedClassPointers
-XX:+TieredCompilation
-Xshare:on

# Production Monitoring
-XX:+FlightRecorder
-XX:StartFlightRecording=duration=300s,filename=/var/log/app/app-profile.jfr
-XX:+HeapDumpOnOutOfMemoryError
-XX:HeapDumpPath=/var/log/app/

# GC Logging for Production
-Xlog:gc*:gc.log:time,tags

# =============================================================================
# PERFORMANCE TESTING PROFILE - Detailed monitoring and profiling
# =============================================================================
[performance-testing]
# Memory Settings - Optimized for testing
-Xms512m
-Xmx2g
-XX:MetaspaceSize=256m
-XX:MaxMetaspaceSize=512m

# G1GC with detailed logging
-XX:+UseG1GC
-XX:MaxGCPauseMillis=100
-XX:G1HeapRegionSize=16m
-XX:+UseStringDeduplication

# Performance Features
-XX:+UseCompressedOops
-XX:+UseCompressedClassPointers
-XX:+TieredCompilation

# Detailed Monitoring and Profiling
-XX:+FlightRecorder
-XX:StartFlightRecording=duration=600s,filename=performance-test.jfr
-XX:+UnlockDiagnosticVMOptions
-XX:+TraceClassLoading
-XX:+PrintGCDetails
-XX:+PrintGCTimeStamps
-XX:+PrintGCApplicationStoppedTime

# Memory Analysis
-XX:+HeapDumpOnOutOfMemoryError
-XX:HeapDumpPath=./heap-dumps/
-XX:+PrintStringDeduplicationStatistics

# =============================================================================
# LOW LATENCY PROFILE - Optimized for minimal pause times
# =============================================================================
[low-latency]
# Memory Settings - Optimized for low latency
-Xms1g
-Xmx4g
-XX:MetaspaceSize=256m
-XX:MaxMetaspaceSize=512m

# ZGC for ultra-low latency (requires larger heap)
-XX:+UnlockExperimentalVMOptions
-XX:+UseZGC
-XX:+UseTransparentHugePages

# Low Latency Optimizations
-XX:+UseCompressedOops
-XX:+UseCompressedClassPointers
-XX:+TieredCompilation
-XX:+OptimizeStringConcat

# Monitoring
-XX:+FlightRecorder
-Xlog:gc*:gc-lowlatency.log:time,tags

# =============================================================================
# MEMORY CONSTRAINED PROFILE - Optimized for limited memory environments
# =============================================================================
[memory-constrained]
# Minimal Memory Settings
-Xms128m
-Xmx512m
-XX:MetaspaceSize=64m
-XX:MaxMetaspaceSize=128m

# G1GC with aggressive memory optimization
-XX:+UseG1GC
-XX:MaxGCPauseMillis=50
-XX:G1HeapRegionSize=4m
-XX:+UseStringDeduplication
-XX:+UseCompressedOops
-XX:+UseCompressedClassPointers

# Memory Optimization
-XX:+OptimizeStringConcat
-XX:+UseStringCache
-XX:+AggressiveOpts

# Minimal Monitoring
-XX:+FlightRecorder
-Xlog:gc:gc-memory.log

# =============================================================================
# USAGE INSTRUCTIONS
# =============================================================================
# To use these profiles:
# 
# 1. Development:
#    java @config/jvm-optimization.properties[development] -jar app.jar
#
# 2. Production:
#    java @config/jvm-optimization.properties[production] -jar app.jar
#
# 3. Performance Testing:
#    java @config/jvm-optimization.properties[performance-testing] -jar app.jar
#
# 4. Low Latency:
#    java @config/jvm-optimization.properties[low-latency] -jar app.jar
#
# 5. Memory Constrained:
#    java @config/jvm-optimization.properties[memory-constrained] -jar app.jar
#
# Note: Adjust memory settings based on your specific environment requirements
